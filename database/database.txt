-- --------------------------------------------------------
-- Хост:                         127.0.0.1
-- Версия на сървъра:            10.6.2-MariaDB - mariadb.org binary distribution
-- ОС на сървъра:                Win64
-- HeidiSQL Версия:              11.3.0.6295
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;


-- Дъмп на структурата на БД deliverit
CREATE DATABASE IF NOT EXISTS `deliverit` /*!40100 DEFAULT CHARACTER SET utf8mb3 */;
USE `deliverit`;

-- Дъмп структура за таблица deliverit.addresses
CREATE TABLE IF NOT EXISTS `addresses` (
  `address_id` int(11) NOT NULL AUTO_INCREMENT,
  `street_name` varchar(100) NOT NULL,
  `city_id` int(11) NOT NULL,
  PRIMARY KEY (`address_id`),
  KEY `addresses_cities_fk` (`city_id`),
  CONSTRAINT `addresses_cities_fk` FOREIGN KEY (`city_id`) REFERENCES `cities` (`city_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.addresses: ~0 rows (приблизително)
/*!40000 ALTER TABLE `addresses` DISABLE KEYS */;
/*!40000 ALTER TABLE `addresses` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.categories
CREATE TABLE IF NOT EXISTS `categories` (
  `category_id` int(11) NOT NULL AUTO_INCREMENT,
  `category_name` varchar(25) NOT NULL,
  PRIMARY KEY (`category_id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.categories: ~3 rows (приблизително)
/*!40000 ALTER TABLE `categories` DISABLE KEYS */;
INSERT INTO `categories` (`category_id`, `category_name`) VALUES
	(1, 'Electronics'),
	(2, 'Clothing'),
	(3, 'Medical');
/*!40000 ALTER TABLE `categories` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.cities
CREATE TABLE IF NOT EXISTS `cities` (
  `city_id` int(11) NOT NULL AUTO_INCREMENT,
  `city_name` varchar(50) NOT NULL,
  `country_id` int(11) NOT NULL,
  PRIMARY KEY (`city_id`),
  KEY `cities_countries_fk` (`country_id`),
  CONSTRAINT `cities_countries_fk` FOREIGN KEY (`country_id`) REFERENCES `countries` (`country_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.cities: ~0 rows (приблизително)
/*!40000 ALTER TABLE `cities` DISABLE KEYS */;
/*!40000 ALTER TABLE `cities` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.countries
CREATE TABLE IF NOT EXISTS `countries` (
  `country_id` int(11) NOT NULL AUTO_INCREMENT,
  `country_name` varchar(50) NOT NULL,
  PRIMARY KEY (`country_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.countries: ~0 rows (приблизително)
/*!40000 ALTER TABLE `countries` DISABLE KEYS */;
/*!40000 ALTER TABLE `countries` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.customers
CREATE TABLE IF NOT EXISTS `customers` (
  `customer_id` int(11) NOT NULL AUTO_INCREMENT,
  `person_id` int(11) DEFAULT NULL,
  `address_id` int(11) NOT NULL,
  PRIMARY KEY (`customer_id`),
  KEY `customers_addresses_fk` (`address_id`),
  KEY `customers_person_id_fk` (`person_id`),
  CONSTRAINT `customers_addresses_fk` FOREIGN KEY (`address_id`) REFERENCES `addresses` (`address_id`),
  CONSTRAINT `customers_person_id_fk` FOREIGN KEY (`person_id`) REFERENCES `personal_details` (`person_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.customers: ~0 rows (приблизително)
/*!40000 ALTER TABLE `customers` DISABLE KEYS */;
/*!40000 ALTER TABLE `customers` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.employee
CREATE TABLE IF NOT EXISTS `employee` (
  `employee_id` int(11) NOT NULL AUTO_INCREMENT,
  `person_id` int(11) NOT NULL,
  `address_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`employee_id`),
  KEY `employee_addresses_fk` (`address_id`),
  KEY `employee_person_id_fk` (`person_id`),
  CONSTRAINT `employee_addresses_fk` FOREIGN KEY (`address_id`) REFERENCES `addresses` (`address_id`),
  CONSTRAINT `employee_person_id_fk` FOREIGN KEY (`person_id`) REFERENCES `personal_details` (`person_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.employee: ~0 rows (приблизително)
/*!40000 ALTER TABLE `employee` DISABLE KEYS */;
/*!40000 ALTER TABLE `employee` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.parcels
CREATE TABLE IF NOT EXISTS `parcels` (
  `parcel_id` int(11) NOT NULL AUTO_INCREMENT,
  `customer_id` int(11) NOT NULL,
  `warehouse_id` int(11) NOT NULL,
  `weight` double NOT NULL,
  `pick_up_from_warehouse` tinyint(1) NOT NULL,
  `shipment_id` int(11) NOT NULL,
  `category_id` int(11) NOT NULL,
  PRIMARY KEY (`parcel_id`),
  KEY `parcels_categories_fk` (`category_id`),
  KEY `parcels_customers_fk` (`customer_id`),
  KEY `parcels_warehouses_fk` (`warehouse_id`),
  KEY `parcels_shipments_fk` (`shipment_id`),
  CONSTRAINT `parcels_categories_fk` FOREIGN KEY (`category_id`) REFERENCES `categories` (`category_id`),
  CONSTRAINT `parcels_customers_fk` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`customer_id`),
  CONSTRAINT `parcels_shipments_fk` FOREIGN KEY (`shipment_id`) REFERENCES `shipments` (`shipment_id`),
  CONSTRAINT `parcels_warehouses_fk` FOREIGN KEY (`warehouse_id`) REFERENCES `warehouses` (`warehouse_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.parcels: ~0 rows (приблизително)
/*!40000 ALTER TABLE `parcels` DISABLE KEYS */;
/*!40000 ALTER TABLE `parcels` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.personal_details
CREATE TABLE IF NOT EXISTS `personal_details` (
  `person_id` int(11) NOT NULL AUTO_INCREMENT,
  `first_name` varchar(50) NOT NULL,
  `last_name` varchar(50) NOT NULL,
  `email` varchar(100) NOT NULL,
  PRIMARY KEY (`person_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.personal_details: ~0 rows (приблизително)
/*!40000 ALTER TABLE `personal_details` DISABLE KEYS */;
/*!40000 ALTER TABLE `personal_details` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.shipments
CREATE TABLE IF NOT EXISTS `shipments` (
  `shipment_id` int(11) NOT NULL AUTO_INCREMENT,
  `departure_date` date NOT NULL,
  `arrival_date` date NOT NULL,
  `status_id` int(11) NOT NULL,
  `origin_warehouse_id` int(11) NOT NULL,
  `destination_warehouse_id` int(11) NOT NULL,
  PRIMARY KEY (`shipment_id`),
  KEY `shipments_statuses_fk` (`status_id`),
  KEY `shipments_destination_warehouse_fk` (`destination_warehouse_id`),
  KEY `shipments_origin_warehouse_fk` (`origin_warehouse_id`),
  CONSTRAINT `shipments_destination_warehouse_fk` FOREIGN KEY (`destination_warehouse_id`) REFERENCES `warehouses` (`warehouse_id`),
  CONSTRAINT `shipments_origin_warehouse_fk` FOREIGN KEY (`origin_warehouse_id`) REFERENCES `warehouses` (`warehouse_id`),
  CONSTRAINT `shipments_statuses_fk` FOREIGN KEY (`status_id`) REFERENCES `statuses` (`status_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.shipments: ~0 rows (приблизително)
/*!40000 ALTER TABLE `shipments` DISABLE KEYS */;
/*!40000 ALTER TABLE `shipments` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.statuses
CREATE TABLE IF NOT EXISTS `statuses` (
  `status_id` int(11) NOT NULL AUTO_INCREMENT,
  `status_name` varchar(25) NOT NULL,
  PRIMARY KEY (`status_id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.statuses: ~3 rows (приблизително)
/*!40000 ALTER TABLE `statuses` DISABLE KEYS */;
INSERT INTO `statuses` (`status_id`, `status_name`) VALUES
	(1, 'Preparing'),
	(2, 'On the way'),
	(3, 'Completed');
/*!40000 ALTER TABLE `statuses` ENABLE KEYS */;

-- Дъмп структура за таблица deliverit.warehouses
CREATE TABLE IF NOT EXISTS `warehouses` (
  `warehouse_id` int(11) NOT NULL AUTO_INCREMENT,
  `address_id` int(11) NOT NULL,
  PRIMARY KEY (`warehouse_id`),
  KEY `warehouses_addresses_fk` (`address_id`),
  CONSTRAINT `warehouses_addresses_fk` FOREIGN KEY (`address_id`) REFERENCES `addresses` (`address_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3;

-- Дъмп данни за таблица deliverit.warehouses: ~0 rows (приблизително)
/*!40000 ALTER TABLE `warehouses` DISABLE KEYS */;
/*!40000 ALTER TABLE `warehouses` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;
